<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Accessible Typeahead examples</title>
    <style>
      /* Example page specific styling. */
      html {
        font-family: -apple-system, BlinkMacSystemFont, 'avenir next', avenir, 'helvetica neue', helvetica, ubuntu, roboto, noto, 'segoe ui', arial, sans-serif;
      }

      main {
        margin: 0 auto;
        max-width: 600px;
      }

      @media (min-width: 641px) {
        .typeahead-wrapper {
          width: 50%
        }
      }
    </style>
    <link rel="stylesheet" href="styled.css">
  </head>
  <body>
    <main>
      <h1>Accessible Typeahead examples</h1>

      <h2>Default options</h2>
      <p>This illustrates usage without any optional parameters.</p>
      <label for="typeahead-default">Select your country</label>
      <div id="tt-default" class="typeahead-wrapper"></div>

      <h2>minLength = 2</h2>
      <p>
        This option will prevent displaying suggestions if less than 2 characters are
        typed in.
      </p>
      <label for="typeahead-minLength">Select your country</label>
      <div id="tt-minLength" class="typeahead-wrapper"></div>

      <h2>displayMenu = 'overlay'</h2>
      <p>This option will display the menu as an absolutely positioned overlay.</p>
      <label for="typeahead-overlay">Select your country</label>
      <div id="tt-overlay" class="typeahead-wrapper"></div>

      <h2>autoselect = true</h2>
      <p>This option will automatically select the first suggestion.</p>
      <label for="typeahead-autoselect">Select your country</label>
      <div id="tt-autoselect" class="typeahead-wrapper"></div>

      <h2>defaultValue = 'Germany'</h2>
      <p>This option will prefill the input with a value.</p>
      <label for="typeahead-defaultValue">Select your country</label>
      <div id="tt-defaultValue" class="typeahead-wrapper"></div>

      <h2>Progressive enhancement</h2>
      <p>
        This example demonstrates how to turn a server-rendered <code>&lt;select&gt;</code> element
        into a typeahead. Turn off JavaScript to see the <code>&lt;select&gt;</code> element.
      </p>
      <label for="typeahead-progressiveEnhancement">Select your country</label>
      <div class="typeahead-wrapper">
        <select id="typeahead-progressiveEnhancement">
          <option value="fr">France</option>
          <option value="de">Germany</option>
          <option value="gb" selected>United Kingdom</option>
        </select>
      </div>

      <h2>Custom results</h2>
      <p>
        This example demonstrates how to allow users to search for a country by either
        its english name or its endonym. The suggestions are user-defined objects and
        they are displayed using a user-defined template. Confirming a suggestion will
        populate the input with the english country name.
      </p>
      <label for="typeahead-customTemplates">Select your country</label>
      <div id="tt-customTemplates" class="typeahead-wrapper"></div>
    </main>

    <script type="text/javascript" src="../dist/accessible-typeahead.min.js"></script>
    <script type="text/javascript">
      function suggest (query, syncResults) {
        var results = [
          'France',
          'Germany',
          'United Kingdom'
        ]
        syncResults(query
          ? results.filter(function (result) {
              return result.toLowerCase().indexOf(query.toLowerCase()) !== -1
            })
          : []
        )
      }
    </script>

    <script type="text/javascript">
      var element = document.querySelector('#tt-default')
      var id = 'typeahead-default'
      AccessibleTypeahead({
        element: element,
        id: id,
        source: suggest
      })
    </script>

    <script type="text/javascript">
      element = document.querySelector('#tt-minLength')
      id = 'typeahead-minLength'
      AccessibleTypeahead({
        element: element,
        id: id,
        minLength: 2,
        source: suggest
      })
    </script>

    <script type="text/javascript">
      element = document.querySelector('#tt-autoselect')
      id = 'typeahead-autoselect'
      AccessibleTypeahead({
        autoselect: true,
        element: element,
        id: id,
        source: suggest
      })
    </script>

    <script type="text/javascript">
      element = document.querySelector('#tt-overlay')
      id = 'typeahead-overlay'
      AccessibleTypeahead({
        displayMenu: 'overlay',
        element: element,
        id: id,
        source: suggest
      })
    </script>

    <script type="text/javascript">
      element = document.querySelector('#tt-defaultValue')
      id = 'typeahead-defaultValue'
      AccessibleTypeahead({
        defaultValue: 'Germany',
        element: element,
        id: id,
        source: suggest
      })
    </script>

    <script type="text/javascript">
      element = document.querySelector('#typeahead-progressiveEnhancement')
      AccessibleTypeahead.enhanceSelectElement({
        selectElement: element
      })
    </script>

    <script type="text/javascript">
      function customSuggest (query, syncResults) {
        var results = [
          { endonymLang: 'fr', endonym: 'République Française', name: 'France' },
          { endonymLang: 'de', endonym: 'Deutschland', name: 'Germany' },
          { endonymLang: 'en', endonym: 'Great Britain', name: 'United Kingdom' }
        ]
        syncResults(query
          ? results.filter(function (result) {
              var resultContains = result.name.toLowerCase().indexOf(query.toLowerCase()) !== -1
              var endonymContains = result.endonym.toLowerCase().indexOf(query.toLowerCase()) !== -1
              return resultContains || endonymContains
            })
          : []
        )
      }

      function inputValueTemplate (result) {
        return result && result.name
      }

      function suggestionTemplate (result) {
        return result && '<strong>' + result.name + '</strong>' +
          ' (<span lang=' + result.endonymLang + '>' + result.endonym + '</span>)'
      }

      element = document.querySelector('#tt-customTemplates')
      id = 'typeahead-customTemplates'
      AccessibleTypeahead({
        element: element,
        id: id,
        source: customSuggest,
        templates: {
          inputValue: inputValueTemplate,
          suggestion: suggestionTemplate
        }
      })
    </script>
  </body>
</html>
